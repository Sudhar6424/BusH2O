<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Water Timing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.container {
    text-align: center;
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
}

h2 {
    margin-bottom: 20px;
}

.input {
    padding: 10px;
    width: 80%;
    margin-bottom: 20px;
    font-size: 16px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.bus-timings {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.bus-card {
    background-color: white;
    padding: 15px;
    margin: 10px 0;
    width: 80%;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    text-align: left;
    position: relative;
}

.bus-card.active {
    background-color: #f0f8ff;
    border: 2px solid #0000ff;
}

.active-symbol {
    position: absolute;
    top: 10px;
    right: 10px;
    color: green;
    font-size: 18px;
}

input[type="text"] {
    font-size: 16px;
}

</style>
<body>

    <div class="container">
        <h2>Bus Water Timings</h2>
        
        <input type="text" id="search" placeholder="Search by route" class="input">

        <div id="bus-timings" class="bus-timings">
            <!-- Bus timings will be dynamically inserted here -->
        </div>
    </div>

    <script>
        const busTimings = [
    { route: "Trichy-Evur", time: "8:00 AM" },
    { route: "Evur-Karur", time: "9:30 AM" },
    { route: "Karur-Evur", time: "11:00 AM" },
    { route: "Evur-Trichy", time: "11:00 AM" },
];

const busTimingsContainer = document.getElementById('bus-timings');
const searchInput = document.getElementById('search');

let activeBus = null;

// Convert 12-hour time format to Date object
const timeToDate = (time) => {
    const [hours, minutes] = time.split(":");
    const [period] = time.split(" ").slice(1); // AM/PM
    const date = new Date();
    date.setHours(period === "AM" ? parseInt(hours) : parseInt(hours) + 12);
    date.setMinutes(parseInt(minutes));
    return date;
};

// Function to find the bus closest to the current time
const findActiveBus = () => {
    const currentTime = new Date();
    let closestBus = null;
    let closestTimeDiff = Infinity;

    busTimings.forEach((bus) => {
        const busTime = timeToDate(bus.time);
        const timeDiff = busTime - currentTime;

        if (timeDiff > 0 && timeDiff < closestTimeDiff) {
            closestBus = bus;
            closestTimeDiff = timeDiff;
        }
    });

    return closestBus;
};

// Function to render the bus timings
const renderBusTimings = (timings) => {
    busTimingsContainer.innerHTML = "";
    timings.forEach((bus) => {
        const busCard = document.createElement('div');
        busCard.classList.add('bus-card');
        
        if (bus === activeBus) {
            busCard.classList.add('active');
        }

        busCard.innerHTML = `
            <h4>${bus.route}</h4>
            <p>Departure: ${bus.time}</p>
        `;

        if (bus === activeBus) {
            const activeSymbol = document.createElement('span');
            activeSymbol.classList.add('active-symbol');
            activeSymbol.textContent = 'âœ”';
            busCard.appendChild(activeSymbol);
        }

        busTimingsContainer.appendChild(busCard);
    });
};

// Event listener for search input
searchInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const filteredBuses = busTimings.filter((bus) =>
        bus.route.toLowerCase().includes(searchTerm)
    );
    renderBusTimings(filteredBuses);
});

// Initial rendering of bus timings and active bus
const updateBusTimings = () => {
    activeBus = findActiveBus();
    renderBusTimings(busTimings);
};

// Update bus timings on page load
updateBusTimings();
setInterval(updateBusTimings, 60000);  // Update every minute to check for active bus


    </script>
</body>
</html>
